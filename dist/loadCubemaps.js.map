{
  "version": 3,
  "sources": ["../buildScripts/loadCubemaps.ts"],
  "sourcesContent": ["import fs from \"fs\";\r\nimport path from \"path\";\r\n\r\nconst CM_DIR = \"./public/assets/cubemaps\";\r\n\r\nconst REQUIRED_FACES = [\"px\", \"nx\", \"py\", \"ny\", \"pz\", \"nz\"];\r\n\r\ninterface CubeMapData {\r\n    name: string;\r\n    files: Record<string, string>;\r\n}\r\n\r\nfunction loadCubemap(dirName: string): CubeMapData {\r\n    const cubeMapDir = path.join(CM_DIR, dirName);\r\n\r\n    const entries = fs.readdirSync(cubeMapDir);\r\n\r\n    const result: Record<string, string> = {};\r\n\r\n    for (const face of REQUIRED_FACES) {\r\n        const file = entries.find(f => f.startsWith(face + \".\"));\r\n\r\n        if (!file) {\r\n            throw new Error(`Missing ${face} in cubemap ${dirName}`);\r\n        }\r\n\r\n        // Generate path relative to public folder (browser-friendly)\r\n        result[face] = `./assets/cubemaps/${dirName}/${file}`;\r\n    }\r\n\r\n    return {\r\n        name: dirName,\r\n        files: result\r\n    };\r\n}\r\n\r\nfunction loadCubemaps(baseDir: string): CubeMapData[] {\r\n    const entries = fs.readdirSync(baseDir, { withFileTypes: true });\r\n\r\n    const cubeMaps: CubeMapData[] = [];\r\n\r\n    for (const entry of entries) {\r\n        if (!entry.isDirectory()) continue;\r\n        cubeMaps.push(loadCubemap(entry.name));\r\n    }\r\n\r\n    return cubeMaps;\r\n}\r\n\r\nconst cubeMaps = loadCubemaps(CM_DIR);\r\n\r\n// generate a ts file\r\n// format\r\n// export const CUBEMAPS = {\r\n//   name: {\r\n//     px: \"path/to/px.png\",\r\n//     nx: \"path/to/nx.png\",\r\n//     py: \"path/to/py.png\",\r\n//     ny: \"path/to/ny.png\",\r\n//     pz: \"path/to/pz.png\",\r\n//     nz: \"path/to/nz.png\",\r\n//   },\r\n//   ...\r\n// } as const;\r\n// export type CubeMapName = keyof typeof CUBEMAPS;\r\n\r\nlet output = `export const CUBEMAPS = {\\n`;\r\n\r\nfor (const cm of cubeMaps) {\r\n    output += `  ${cm.name}: {\\n`;\r\n    for (const face of REQUIRED_FACES) {\r\n        output += `    ${face}: ${JSON.stringify(cm.files[face])},\\n`;\r\n    }\r\n    output += `  },\\n`;\r\n}\r\n\r\noutput += `} as const;\\n\\n`;\r\noutput += `export type CubeMapName = keyof typeof CUBEMAPS;\\n`;\r\noutput += 'export type CubeMapEntry = typeof CUBEMAPS[CubeMapName];\\n';\r\n\r\nconst OUT_DIR = \"./src/graphics\";\r\nconst OUT_FILE = path.join(OUT_DIR, \"cubemapData.ts\");\r\n\r\nfs.mkdirSync(OUT_DIR, { recursive: true });\r\nfs.writeFileSync(OUT_FILE, output, \"utf8\");\r\n"],
  "mappings": ";AAAA,OAAO,QAAQ;AACf,OAAO,UAAU;AAEjB,IAAM,SAAS;AAEf,IAAM,iBAAiB,CAAC,MAAM,MAAM,MAAM,MAAM,MAAM,IAAI;AAO1D,SAAS,YAAY,SAA8B;AAC/C,QAAM,aAAa,KAAK,KAAK,QAAQ,OAAO;AAE5C,QAAM,UAAU,GAAG,YAAY,UAAU;AAEzC,QAAM,SAAiC,CAAC;AAExC,aAAW,QAAQ,gBAAgB;AAC/B,UAAM,OAAO,QAAQ,KAAK,OAAK,EAAE,WAAW,OAAO,GAAG,CAAC;AAEvD,QAAI,CAAC,MAAM;AACP,YAAM,IAAI,MAAM,WAAW,IAAI,eAAe,OAAO,EAAE;AAAA,IAC3D;AAGA,WAAO,IAAI,IAAI,qBAAqB,OAAO,IAAI,IAAI;AAAA,EACvD;AAEA,SAAO;AAAA,IACH,MAAM;AAAA,IACN,OAAO;AAAA,EACX;AACJ;AAEA,SAAS,aAAa,SAAgC;AAClD,QAAM,UAAU,GAAG,YAAY,SAAS,EAAE,eAAe,KAAK,CAAC;AAE/D,QAAMA,YAA0B,CAAC;AAEjC,aAAW,SAAS,SAAS;AACzB,QAAI,CAAC,MAAM,YAAY,EAAG;AAC1B,IAAAA,UAAS,KAAK,YAAY,MAAM,IAAI,CAAC;AAAA,EACzC;AAEA,SAAOA;AACX;AAEA,IAAM,WAAW,aAAa,MAAM;AAiBpC,IAAI,SAAS;AAAA;AAEb,WAAW,MAAM,UAAU;AACvB,YAAU,KAAK,GAAG,IAAI;AAAA;AACtB,aAAW,QAAQ,gBAAgB;AAC/B,cAAU,OAAO,IAAI,KAAK,KAAK,UAAU,GAAG,MAAM,IAAI,CAAC,CAAC;AAAA;AAAA,EAC5D;AACA,YAAU;AAAA;AACd;AAEA,UAAU;AAAA;AAAA;AACV,UAAU;AAAA;AACV,UAAU;AAEV,IAAM,UAAU;AAChB,IAAM,WAAW,KAAK,KAAK,SAAS,gBAAgB;AAEpD,GAAG,UAAU,SAAS,EAAE,WAAW,KAAK,CAAC;AACzC,GAAG,cAAc,UAAU,QAAQ,MAAM;",
  "names": ["cubeMaps"]
}
